<html>
    <head>
        <link rel="icon" type="image/png" href="/favicon.png" />
        <link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/monokai.min.css">
        <style>
            h1, h2 {
                text-align: center;
            }
        </style>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/highlight.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
        <script src="marked.js"></script>
        <script>
            (function($) {
                $.queryString = (function(a) {
                    if (a == "")
                        return {};

                    var b = {};

                    for (var i = 0; i < a.length; ++i) {
                        var p=a[i].split('=');

                        if (p.length != 2)
                            continue;

                        b[p[0]] = decodeURIComponent(p[1].replace(/\+/g, " "));
                    }

                    return b;
                })(window.location.search.substr(1).split('&'))
            })(jQuery);

            String.prototype.endsWith = function(suffix) {
                return this.indexOf(suffix, this.length - suffix.length) !== -1;
            };

            $(function() {
                var articleDiv = $("#article");
                var articleId = $.queryString["articleId"];

                if (! articleId)
                    articleId = "default";

                var articleUrl = "./articles/" + articleId;

                if (! articleUrl.endsWith(".md"))
                    articleUrl += ".md";

                var request = {
                    type: "GET",
                    dataType: "text",
                    url: articleUrl,
                    success: function(articleMarkdown) {
                        articleDiv.html(marked(articleMarkdown));
                        var titleMatches = articleMarkdown.match(/<!--title=(.*)-->/);

                        if (titleMatches)
                            document.title = titleMatches[1];

                        hljs.initHighlighting();
                    },
                    error: function(jqXHR, textStatus, errorThrown) {
                        articleDiv.html("failed to load article content<br />" + textStatus + "<br />" + errorThrown);
                    }
                };

                $.ajax(request);
            });
        </script>
    </head>
    <body>
        <div style="; margin: 0px auto; width: 650px;">
            <div id="article">
            </div>
            <div id="disqus_thread"></div>
            <script type="text/javascript">
                /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                var disqus_shortname = 'rkoeningergithubio'; // required: replace example with your forum shortname

                /* * * DON'T EDIT BELOW THIS LINE * * */
                (function() {
                    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </body>
</html>